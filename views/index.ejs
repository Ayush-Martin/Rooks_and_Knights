<!DOCTYPE html>
<html lang="en">

<head>
	<%- include('./partials/head.ejs') %>
		<style>
			/* Custom Product Card UI */
			.product-card-custom {
				background: #fff;
				border-radius: 16px;
				overflow: hidden;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
				transition: all 0.3s ease;
				height: 100%;
				border: 1px solid #f0f0f0;
				display: block;
				text-decoration: none;
				position: relative;
			}

			.product-card-custom:hover {
				transform: translateY(-5px);
				box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
				border-color: #333;
			}

			.product-img-wrapper {
				position: relative;
				padding-top: 100%;
				/* 1:1 Aspect Ratio */
				overflow: hidden;
				background: #f9f9f9;
			}

			.product-img-wrapper img {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				object-fit: cover;
				transition: transform 0.5s ease;
			}

			.product-card-custom:hover .product-img-wrapper img {
				transform: scale(1.08);
			}

			.product-details {
				padding: 20px;
			}

			.product-title {
				font-family: 'Poppins', sans-serif;
				font-size: 15px;
				font-weight: 600;
				color: #333;
				margin-bottom: 8px;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
				display: block;
				transition: color 0.3s;
			}

			.product-card-custom:hover .product-title {
				color: #000;
			}

			.product-rating {
				font-size: 13px;
				color: #f1c40f;
				margin-bottom: 10px;
				display: flex;
				align-items: center;
			}

			.product-rating i {
				margin-right: 2px;
			}

			.product-price {
				font-family: 'Poppins', sans-serif;
				font-size: 17px;
				font-weight: 700;
				color: #333;
				display: flex;
				align-items: center;
				gap: 8px;
			}

			.product-price .old-price {
				font-size: 14px;
				color: #999;
				text-decoration: line-through;
				font-weight: 400;
			}

			.product-price .discount-badge {
				font-size: 11px;
				background: #e74c3c;
				color: #fff;
				padding: 2px 6px;
				border-radius: 4px;
				font-weight: 600;
			}
		</style>
</head>

<body class="">

	<!-- Header -->
	<header>
		<%- include('./partials/header.ejs') %>
	</header>

	<!-- Slider -->
	<section class="section-slide">
		<div class="wrap-slick1">
			<div class="slick1">
				<div class="item-slick1" style="background-image: url(/public/images/slide-01.jpg);">
					<div class="container h-full">
						<div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
							<div class="layer-slick1 animated visible-false" data-appear="fadeInDown" data-delay="0">
								<span class="ltext-101 cl2 respon2">
									Books
								</span>
							</div>

							<div class="layer-slick1 animated visible-false" data-appear="fadeInUp" data-delay="800">
								<h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
									Master Your Moves
								</h2>
							</div>

							<div class="layer-slick1 animated visible-false" data-appear="zoomIn" data-delay="1600">
								<a href="/shop"
									class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
									Shop Now
								</a>
							</div>
						</div>
					</div>
				</div>

				<div class="item-slick1" style="background-image: url(/public/images/slide-02.jpg);">
					<div class="container h-full">
						<div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
							<div class="layer-slick1 animated visible-false" data-appear="rollIn" data-delay="0">
								<span class="ltext-101 cl2 respon2">
									Softwares
								</span>
							</div>

							<div class="layer-slick1 animated visible-false" data-appear="lightSpeedIn"
								data-delay="800">
								<h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
									A Digital Chess Trainer
								</h2>
							</div>

							<div class="layer-slick1 animated visible-false" data-appear="slideInUp" data-delay="1600">
								<a href="/shop"
									class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
									Shop Now
								</a>
							</div>
						</div>
					</div>
				</div>

				<div class="item-slick1" style="background-image: url(/public/images/slide-03.jpg);">
					<div class="container h-full">
						<div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
							<div class="layer-slick1 animated visible-false" data-appear="rotateInDownLeft"
								data-delay="0">
								<span class="ltext-101 cl2 respon2">
									Magazines
								</span>
							</div>

							<div class="layer-slick1 animated visible-false" data-appear="rotateInUpRight"
								data-delay="800">
								<h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
									The Greatest Moves
								</h2>
							</div>

							<div class="layer-slick1 animated visible-false" data-appear="rotateIn" data-delay="1600">
								<a href="/shop"
									class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
									Shop Now
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>


	<!-- Banner -->
	<div class="sec-banner bg0 p-t-80 p-b-50">
		<div class="container">
			<div class="row">
				<% categories.forEach((category)=>{ %>
					<!-- Block1 -->
					<div class="block1 col-md-6 col-xl-4 p-b-30  text-center p-t-30 p-b-30 m-lr-15-sm m-lr-auto ">

						<a href="/shop?category=<%= category._id %>" class="block1-txt ab-t-l s-full p-t-10 ">
							<div class="block1-txt-child1 ">
								<span class="block1-name ltext-102 trans-04 p-b-8">
									<%= category.categoryName; %>
								</span>
							</div>
						</a>
					</div>

					<% })%>

			</div>
		</div>
	</div>


	<!-- Product -->
	<section class="bg0 p-t-23 p-b-140">
		<div class="container">
			<div class="p-b-10">
				<h3 class="ltext-103 cl5">
					Top Selling Products
				</h3>
			</div>

			<div class="row isotope-grid">
				<% topProductList.forEach((product)=> {%>
					<div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item women">
						<a href="/shop/product/<%= product._id %>" class="product-card-custom">
							<div class="product-img-wrapper">
								<img src="<%= product.productImage1 %>" alt="<%= product.productName %>">
							</div>
							<div class="product-details">
								<span class="product-title">
									<%= product.productName %>
								</span>

								<div class="product-rating">
									<% let sum=0 %>
										<% product.reviews.forEach(element=> { sum+=element.ratingStar }); %>
											<% let average=product.reviews.length> 0 ? sum/product.reviews.length : 0 %>

												<% for(let i=0; i<5; i++){ %>
													<% if(i < Math.round(average)) { %>
														<i class="zmdi zmdi-star"></i>
														<% } else { %>
															<i class="zmdi zmdi-star-outline"
																style="color: #e0e0e0;"></i>
															<% } %>
																<% } %>
																	<span class="text-muted small ms-1"
																		style="font-size: 11px;">(<%=
																			product.reviews.length %>)</span>
								</div>

								<div class="product-price">
									<% if(product.offer || product.categoryID.offer || product.subCategoryID.offer) {%>
										<span class="old-price">₹<%= product.price %></span>
										<span>₹<%=parseInt( product.price- product.price *
												Math.max(product.offer,product.categoryID.offer,product.subCategoryID.offer)/100
												)%></span>
										<% }else{ %>
											<span>₹<%= product.price %></span>
											<% } %>
								</div>
							</div>
						</a>
					</div>
					<% }) %>
			</div>

			<!-- Load more -->
			<div class="flex-c-m flex-w w-full p-t-45">
				<a href="/shop" class="flex-c-m stext-101 cl5 size-103 bg2 bor1 hov-btn1 p-lr-15 trans-04">
					More Products
				</a>
			</div>
		</div>
	</section>


	<!-- Footer -->
	<footer class="bg3 p-t-75 p-b-32">
		<%- include('./partials/footer.ejs') %>
	</footer>


	<%- include('./partials/backToTop.ejs') %>
		<%- include('./partials/scriptBody.ejs') %>

</body>

</html>